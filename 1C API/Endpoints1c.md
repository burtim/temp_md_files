# 1C API
***

## Процедуры с автомобилями

### Добавить автомобиль
POST (api/1c/auto)
```
//принимает
{
  "clientId" : 0, //Идентификатор клиента
  "mark": "string", //*** Марка авто (производитель)
  "model": "string", //*** Модель авто
  "year": 0, //Год производства
  "vin": "string", //*** VIN
  "registrationNumber": "string", //регистрационный номер
  "mileAge": 0, //Пробег авто
  "description" : "string" //Описание
}
//отдает созданный объект
//200 Ok || 400 BadRequest
```

### Изменить пробег автомобиля
PUT (api/1c/auto)
```json
//принимает
{
  "vin" : "string",
  "mileAge": 0, //Пробег авто
  "date" : "2021-10-22"
}
//отдает созданный объект
//200 Ok || 400 BadRequest
```

### Получить автомобиль
GET (api/1c/auto/{autoId})
> Может нужно получить не автомобиль, автомобили клиента?
```json
//отдает (не все параметры могут прийти! Например, нет отчества или клиент не заполнил имя и фамилию)
{
  "clientId": 0, //Идентификатор клиента
  "mark": "string", //Марка авто (производитель)
  "model": "string", //Модель авто
  "year": 0, //Год производства
  "vin": "string", //VIN
  "registrationNumber": "string", //Регистрационный номер
  "mileAge": 0, //Пробег авто
  "description" : "string" //Описание
}
//200 Ok || 400 BadRequest
```

### Получить автомобили клиента
GET (api/1c/auto?clientId={CLIENT_ID})
```json
//отдает (не все параметры могут прийти! Например, нет отчества или клиент не заполнил имя и фамилию)
  [
    {
      "clientId": 0, //Идентификатор клиента
      "mark": "string", //Марка авто (производитель)
      "model": "string", //Модель авто
      "year": 0, //Год производства
      "vin": "string", //VIN
      "registrationNumber": "string", //Регистрационный номер
      "mileAge": 0, //Пробег авто
      "description" : "string" //Описание
    },
    {
      "clientId": 0, //Идентификатор клиента
      "mark": "string", //Марка авто (производитель)
      "model": "string", //Модель авто
      "year": 0, //Год производства
      "vin": "string", //VIN
      "registrationNumber": "string", //Регистрационный номер
      "mileAge": 0, //Пробег авто
      "description" : "string" //Описание
    }
  ]

//200 Ok || 400 BadRequest
```


### Изменить характеристики авто.
PUT (api/1c/auto/{autoId})
> Поля необязательны, следует отправлять только изменяемые поля
```json
//принимает
{
  "mark": "string", //Марка авто (производитель)
  "model": "string", //Модель авто
  "year": 0, //Год производства
  "vin": "string", //VIN
  "registrationNumber": "string", //Регистрационный номер
  "description" : "string" //Описание
}
//Отдает измененный объект   
//200 Ok || 400 BadRequest
```

### Удалить авто
PUT (api/1c/auto/{autoId})
```json
//200 Ok || 400 BadRequest
```

### Передать авто другому клиенту
PUT (api/1c/auto/transfer?autoId={AUTO_ID}&clientId={CLIENT_ID})
```json
//200 Ok || 400 BadRequest
```

## Процедуры для работы с владельцами (КЛИЕНТАМИ)

### Добавление владельца (Клиента)
> Пользователь мобильного приложения (клиент) уже автоматически является владельцем, его добавлять не нужно

### Удаление владельца (Клиента)
> Нельзя сделать этот метод, так как придется удалить аккаунт клиента.


### Получить владельца (клиента)
GET (api/1c/client/{clientId})
```json
//Отдает
  {
    "clientId": 2, 
    "email": "ivan@gmail.com",
    "phoneNumber": "89881234567",
    "firstName": "Иван",
    "lastName": "Иванов",
    "patronymic": "Иванович"
  } 
//200 Ok || 400 BadRequest
```

## Процедуры для работы с заказ-нарядами
> В пилотной версии упрощенная система заказ-нарядов - (Заявки на ремонты)  
> Заказ-наряды из 1С будут отправляться в AutoBonus, чтобы сервис AutoBonus имел информацию о произведенных ремонтах.  

### Добавить заказ-наряд
POST (api/1c/repair)
```json
//принимает
  {
    "clientId" : 0, //УИН клиента
    "inn" : 0, //ИНН организации
    "vin" : "string", 
    "documentDateTime" : "2021-10-22T06:40:41", //Дата/время документа
    "documentId" : 0, //Номер документа
    "totalSum" : 0, //Сумма документа
    "workSum" : 0, //Сумма работ
    "goodSum" : 0, //Сумма товаров
    "comment" : "string", //комментарий к заказ-наряду
    "mileAge" : 0 //пробег
  } 
//200 Ok || 400 BadRequest
```

### Удалить заказ-наряд
DELETE (api/1c/repair)
```json
//принимает
  {
    "inn" : 0, //ИНН
    "documentId" : 0 //Номер документа
  } 
//200 Ok || 400 BadRequest
```



